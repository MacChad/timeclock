{"changed":true,"filter":false,"title":"http-auth-interceptor.js","tooltip":"/app/services/http-auth-interceptor.js","value":"/*global angular:true, browser:true */\r\n\r\n/**\r\n * @license HTTP Auth Interceptor Module for AngularJS\r\n * (c) 2012 Witold Szczerba\r\n * License: MIT\r\n */\r\n(function () {\r\n  'use strict';\r\n\r\n  angular.module('http-auth-interceptor', ['http-auth-interceptor-buffer'])\r\n\r\n  .factory('authService', ['$rootScope','httpBuffer', function($rootScope, httpBuffer) {\r\n    return {\r\n      /**\r\n       * Call this function to indicate that authentication was successfull and trigger a\r\n       * retry of all deferred requests.\r\n       * @param data an optional argument to pass on to $broadcast which may be useful for\r\n       * example if you need to pass through details of the user that was logged in\r\n       */\r\n      loginConfirmed: function(data, configUpdater) {\r\n        var updater = configUpdater || function(config) {return config;};\r\n        $rootScope.$broadcast('event:auth-loginConfirmed', data);\r\n        httpBuffer.retryAll(updater);\r\n      },\r\n\r\n      /**\r\n       * Call this function to indicate that authentication should not proceed.\r\n       * All deferred requests will be abandoned or rejected (if reason is provided).\r\n       * @param data an optional argument to pass on to $broadcast.\r\n       * @param reason if provided, the requests are rejected; abandoned otherwise.\r\n       */\r\n      loginCancelled: function(data, reason) {\r\n        httpBuffer.rejectAll(reason);\r\n        $rootScope.$broadcast('event:auth-loginCancelled', data);\r\n      }\r\n    };\r\n  }])\r\n\r\n  /**\r\n   * $http interceptor.\r\n   * On 401 response (without 'ignoreAuthModule' option) stores the request\r\n   * and broadcasts 'event:angular-auth-loginRequired'.\r\n   */\r\n  .config(['$httpProvider', function($httpProvider) {\r\n    $httpProvider.interceptors.push(['$rootScope', '$q', 'httpBuffer', function($rootScope, $q, httpBuffer) {\r\n      return {\r\n        responseError: function(rejection) {\r\n          if (rejection.status === 401 && !rejection.config.ignoreAuthModule) {\r\n            var deferred = $q.defer();\r\n            httpBuffer.append(rejection.config, deferred);\r\n            $rootScope.$broadcast('event:auth-loginRequired', rejection);\r\n            return deferred.promise;\r\n          }\r\n          // otherwise, default behaviour\r\n          return $q.reject(rejection);\r\n        }\r\n      };\r\n    }]);\r\n  }]);\r\n\r\n  /**\r\n   * Private module, a utility, required internally by 'http-auth-interceptor'.\r\n   */\r\n  angular.module('http-auth-interceptor-buffer', [])\r\n\r\n  .factory('httpBuffer', ['$injector', function($injector) {\r\n    /** Holds all the requests, so they can be re-requested in future. */\r\n    var buffer = [];\r\n\r\n    /** Service initialized later because of circular dependency problem. */\r\n    var $http;\r\n\r\n    function retryHttpRequest(config, deferred) {\r\n      function successCallback(response) {\r\n        deferred.resolve(response);\r\n      }\r\n      function errorCallback(response) {\r\n        deferred.reject(response);\r\n      }\r\n      $http = $http || $injector.get('$http');\r\n      $http(config).then(successCallback, errorCallback);\r\n    }\r\n\r\n    return {\r\n      /**\r\n       * Appends HTTP request configuration object with deferred response attached to buffer.\r\n       */\r\n      append: function(config, deferred) {\r\n        buffer.push({\r\n          config: config,\r\n          deferred: deferred\r\n        });\r\n      },\r\n\r\n      /**\r\n       * Abandon or reject (if reason provided) all the buffered requests.\r\n       */\r\n      rejectAll: function(reason) {\r\n        if (reason) {\r\n          for (var i = 0; i < buffer.length; ++i) {\r\n            buffer[i].deferred.reject(reason);\r\n          }\r\n        }\r\n        buffer = [];\r\n      },\r\n\r\n      /**\r\n       * Retries all the buffered requests clears the buffer.\r\n       */\r\n      retryAll: function(updater) {\r\n        for (var i = 0; i < buffer.length; ++i) {\r\n          retryHttpRequest(updater(buffer[i].config), buffer[i].deferred);\r\n        }\r\n        buffer = [];\r\n      }\r\n    };\r\n  }]);\r\n})();","undoManager":{"mark":99,"position":100,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":16},"end":{"row":9,"column":17}},"text":":"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":17},"end":{"row":9,"column":18}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":18},"end":{"row":9,"column":19}},"text":"f"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":19},"end":{"row":9,"column":20}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":20},"end":{"row":9,"column":21}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":21},"end":{"row":9,"column":22}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":22},"end":{"row":9,"column":23}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":23},"end":{"row":9,"column":24}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":24},"end":{"row":9,"column":25}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":25},"end":{"row":9,"column":26}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":26},"end":{"row":9,"column":28}},"text":"()"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":27},"end":{"row":9,"column":28}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":28},"end":{"row":9,"column":29}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":29},"end":{"row":9,"column":30}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":30},"end":{"row":9,"column":31}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":32},"end":{"row":9,"column":33}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":33},"end":{"row":9,"column":34}},"text":"{"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":34},"end":{"row":10,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":10,"column":0},"end":{"row":11,"column":0}},"lines":["        "]},{"action":"insertText","range":{"start":{"row":11,"column":0},"end":{"row":11,"column":5}},"text":"    }"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":8},"end":{"row":10,"column":9}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":9},"end":{"row":10,"column":10}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":10},"end":{"row":10,"column":11}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":11},"end":{"row":10,"column":12}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":12},"end":{"row":10,"column":13}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":13},"end":{"row":10,"column":14}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":10,"column":8},"end":{"row":10,"column":14}},"text":"return"},{"action":"insertText","range":{"start":{"row":10,"column":8},"end":{"row":10,"column":22}},"text":"function(id) {"},{"action":"insertText","range":{"start":{"row":10,"column":22},"end":{"row":11,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":11,"column":0},"end":{"row":12,"column":0}},"lines":["            return $http.get(\"api/?action=usersUpdate&id=\" + id);"]},{"action":"insertText","range":{"start":{"row":12,"column":0},"end":{"row":12,"column":10}},"text":"        },"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":10,"column":8},"end":{"row":10,"column":22}},"text":"function(id) {"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":10,"column":4},"end":{"row":10,"column":8}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":10,"column":0},"end":{"row":10,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":9,"column":34},"end":{"row":10,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":10,"column":42},"end":{"row":10,"column":53}},"text":"usersUpdate"},{"action":"insertText","range":{"start":{"row":10,"column":42},"end":{"row":10,"column":43}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":43},"end":{"row":10,"column":44}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":44},"end":{"row":10,"column":45}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":45},"end":{"row":10,"column":46}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":46},"end":{"row":10,"column":47}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":47},"end":{"row":10,"column":48}},"text":"L"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":48},"end":{"row":10,"column":49}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":49},"end":{"row":10,"column":50}},"text":"g"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":50},"end":{"row":10,"column":51}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":51},"end":{"row":10,"column":52}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":62},"end":{"row":10,"column":63}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":63},"end":{"row":10,"column":64}},"text":"+"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":64},"end":{"row":10,"column":65}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":65},"end":{"row":10,"column":67}},"text":"\"\""}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":66},"end":{"row":10,"column":67}},"text":"&"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":67},"end":{"row":10,"column":68}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":68},"end":{"row":10,"column":69}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":69},"end":{"row":10,"column":70}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":70},"end":{"row":10,"column":71}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":71},"end":{"row":10,"column":72}},"text":"w"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":72},"end":{"row":10,"column":73}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":10,"column":72},"end":{"row":10,"column":73}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":10,"column":71},"end":{"row":10,"column":72}},"text":"w"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":10,"column":70},"end":{"row":10,"column":71}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":10,"column":69},"end":{"row":10,"column":70}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":10,"column":68},"end":{"row":10,"column":69}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":68},"end":{"row":10,"column":69}},"text":"w"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":69},"end":{"row":10,"column":70}},"text":"="}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":71},"end":{"row":10,"column":72}},"text":"+"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":72},"end":{"row":10,"column":73}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":73},"end":{"row":10,"column":74}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":74},"end":{"row":10,"column":75}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":75},"end":{"row":10,"column":76}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":76},"end":{"row":10,"column":77}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":77},"end":{"row":10,"column":78}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":78},"end":{"row":10,"column":79}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":79},"end":{"row":10,"column":80}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":80},"end":{"row":10,"column":81}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":81},"end":{"row":10,"column":82}},"text":"w"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":82},"end":{"row":10,"column":83}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":83},"end":{"row":10,"column":84}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":84},"end":{"row":10,"column":85}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":10,"column":78},"end":{"row":10,"column":85}},"text":"assword"},{"action":"insertText","range":{"start":{"row":10,"column":78},"end":{"row":10,"column":79}},"text":"w"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":12,"column":5},"end":{"row":12,"column":6}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":10,"column":12},"end":{"row":10,"column":18}},"text":"return"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":10,"column":12},"end":{"row":10,"column":13}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":12},"end":{"row":10,"column":13}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":13},"end":{"row":10,"column":14}},"text":"f"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":10,"column":13},"end":{"row":10,"column":14}},"text":"f"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":10,"column":12},"end":{"row":10,"column":13}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":12},"end":{"row":10,"column":13}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":13},"end":{"row":10,"column":14}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":14},"end":{"row":10,"column":15}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":15},"end":{"row":10,"column":16}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":16},"end":{"row":10,"column":17}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":10,"column":16},"end":{"row":10,"column":17}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":10,"column":15},"end":{"row":10,"column":16}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":10,"column":14},"end":{"row":10,"column":15}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":14},"end":{"row":10,"column":15}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":15},"end":{"row":10,"column":16}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":16},"end":{"row":10,"column":17}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":17},"end":{"row":10,"column":18}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":18},"end":{"row":10,"column":19}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":11,"column":4},"end":{"row":11,"column":8}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":11,"column":5},"end":{"row":11,"column":6}},"text":","}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":60},"end":{"row":10,"column":61}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":61},"end":{"row":10,"column":62}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":62},"end":{"row":10,"column":63}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":63},"end":{"row":10,"column":64}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":64},"end":{"row":10,"column":65}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":14,"column":0},"end":{"row":14,"column":6}},"text":"    };"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":15,"column":0},"end":{"row":15,"column":4}},"text":"}]);"},{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":15,"column":0}},"nl":"\n","lines":["'use strict';","","angular.module('Auth', ['$http', '$rootScope', function($http) {","    return {","    loggedIn : function() {","        var isLoggedIn = $rootScope.loggedIn;","        ","        return isLoggedIn;","    },","    checkPasswd : function(user) {","            return $http.get(\"api/?action=adminLogin&id=\" + user.id + \"&pw=\"+user.pw);","    }","    };","    ",""]},{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":38}},"text":"/*global angular:true, browser:true */"},{"action":"insertText","range":{"start":{"row":0,"column":38},"end":{"row":1,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":118,"column":0}},"lines":["","/**"," * @license HTTP Auth Interceptor Module for AngularJS"," * (c) 2012 Witold Szczerba"," * License: MIT"," */","(function () {","  'use strict';","","  angular.module('http-auth-interceptor', ['http-auth-interceptor-buffer'])","","  .factory('authService', ['$rootScope','httpBuffer', function($rootScope, httpBuffer) {","    return {","      /**","       * Call this function to indicate that authentication was successfull and trigger a","       * retry of all deferred requests.","       * @param data an optional argument to pass on to $broadcast which may be useful for","       * example if you need to pass through details of the user that was logged in","       */","      loginConfirmed: function(data, configUpdater) {","        var updater = configUpdater || function(config) {return config;};","        $rootScope.$broadcast('event:auth-loginConfirmed', data);","        httpBuffer.retryAll(updater);","      },","","      /**","       * Call this function to indicate that authentication should not proceed.","       * All deferred requests will be abandoned or rejected (if reason is provided).","       * @param data an optional argument to pass on to $broadcast.","       * @param reason if provided, the requests are rejected; abandoned otherwise.","       */","      loginCancelled: function(data, reason) {","        httpBuffer.rejectAll(reason);","        $rootScope.$broadcast('event:auth-loginCancelled', data);","      }","    };","  }])","","  /**","   * $http interceptor.","   * On 401 response (without 'ignoreAuthModule' option) stores the request","   * and broadcasts 'event:angular-auth-loginRequired'.","   */","  .config(['$httpProvider', function($httpProvider) {","    $httpProvider.interceptors.push(['$rootScope', '$q', 'httpBuffer', function($rootScope, $q, httpBuffer) {","      return {","        responseError: function(rejection) {","          if (rejection.status === 401 && !rejection.config.ignoreAuthModule) {","            var deferred = $q.defer();","            httpBuffer.append(rejection.config, deferred);","            $rootScope.$broadcast('event:auth-loginRequired', rejection);","            return deferred.promise;","          }","          // otherwise, default behaviour","          return $q.reject(rejection);","        }","      };","    }]);","  }]);","","  /**","   * Private module, a utility, required internally by 'http-auth-interceptor'.","   */","  angular.module('http-auth-interceptor-buffer', [])","","  .factory('httpBuffer', ['$injector', function($injector) {","    /** Holds all the requests, so they can be re-requested in future. */","    var buffer = [];","","    /** Service initialized later because of circular dependency problem. */","    var $http;","","    function retryHttpRequest(config, deferred) {","      function successCallback(response) {","        deferred.resolve(response);","      }","      function errorCallback(response) {","        deferred.reject(response);","      }","      $http = $http || $injector.get('$http');","      $http(config).then(successCallback, errorCallback);","    }","","    return {","      /**","       * Appends HTTP request configuration object with deferred response attached to buffer.","       */","      append: function(config, deferred) {","        buffer.push({","          config: config,","          deferred: deferred","        });","      },","","      /**","       * Abandon or reject (if reason provided) all the buffered requests.","       */","      rejectAll: function(reason) {","        if (reason) {","          for (var i = 0; i < buffer.length; ++i) {","            buffer[i].deferred.reject(reason);","          }","        }","        buffer = [];","      },","","      /**","       * Retries all the buffered requests clears the buffer.","       */","      retryAll: function(updater) {","        for (var i = 0; i < buffer.length; ++i) {","          retryHttpRequest(updater(buffer[i].config), buffer[i].deferred);","        }","        buffer = [];","      }","    };","  }]);"]},{"action":"insertText","range":{"start":{"row":118,"column":0},"end":{"row":118,"column":5}},"text":"})();"}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":18,"column":12},"end":{"row":18,"column":12},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1404150279083}